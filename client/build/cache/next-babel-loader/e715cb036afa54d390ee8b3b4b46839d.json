{"ast":null,"code":"var _jsxFileName = \"/Users/seanjin/Documents/EBS/project/G1T3-frontend/client/components/foodbasket/Basket.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Grid, Container } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport MainCard from './Cards/MainCard.js';\nimport BasketCard from './Cards/BasketCard.js';\nimport StockCard from './Cards/StockCard.js';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass Basket extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      basket: props.data.basket,\n      allStocks: props.data.allStocks,\n      basketItems: null,\n      selectedBasket: null,\n      editMode: false,\n      inputNewBasket: ''\n    };\n    this.expandBasket = this.expandBasket.bind(this);\n    this.resetShowBasket = this.resetShowBasket.bind(this);\n    this.showAllStocks = this.showAllStocks.bind(this);\n    this.handleIncrement = this.handleIncrement.bind(this);\n    this.handleDecrement = this.handleDecrement.bind(this);\n    this.saveBasket = this.saveBasket.bind(this);\n    this.createBasket = this.createBasket.bind(this);\n    this.onInputBasketChange = this.onInputBasketChange.bind(this);\n  }\n\n  resetShowBasket() {\n    this.setState({\n      selectedBasket: null,\n      basketItems: null,\n      editMode: false\n    });\n  }\n\n  expandBasket(item) {\n    this.setState({\n      basketItems: item.stocks,\n      selectedBasket: item.BasketID\n    });\n  }\n\n  showAllStocks() {\n    this.setState({\n      editMode: true\n    });\n  }\n\n  handleIncrement(item) {\n    const {\n      basketItems,\n      selectedBasket\n    } = this.state;\n\n    if (basketItems === null) {\n      return;\n    }\n\n    const id = item.stock_stockID;\n    const itemExist = basketItems.filter(obj => obj.stock_stock_stockID === id);\n\n    if (itemExist && itemExist.length) {\n      const updatedBasket = basketItems.map(obj => {\n        if (obj.stock_stock_stockID === id) {\n          return _objectSpread(_objectSpread({}, obj), {}, {\n            quantity: obj.quantity + 1\n          });\n        } else {\n          return obj;\n        }\n      });\n      this.setState({\n        basketItems: updatedBasket\n      });\n      return;\n    } else {\n      const updatedItem = {\n        quantity: 1,\n        basket_BasketID: selectedBasket,\n        stock_charities_charityID: 'charity001',\n        stock_stock_stockID: id,\n        stock_stock_name: item.stock_name\n      };\n      const updatedBasket = [...basketItems, updatedItem];\n      this.setState({\n        basketItems: updatedBasket\n      });\n      return;\n    }\n  }\n\n  handleDecrement(item) {\n    const {\n      basketItems,\n      selectedBasket,\n      editMode\n    } = this.state;\n\n    if (!editMode) {\n      return;\n    }\n\n    const id = item.stock_stock_stockID;\n    const itemToUpdate = basketItems.filter(obj => obj.stock_stock_stockID === id)[0];\n\n    if (itemToUpdate.quantity === 1) {\n      const updatedBasket = basketItems.filter(obj => obj.stock_stock_stockID !== id);\n      this.setState({\n        basketItems: updatedBasket\n      });\n      return;\n    } else {\n      const updatedBasket = basketItems.map(obj => {\n        if (obj.stock_stock_stockID === id) {\n          return _objectSpread(_objectSpread({}, obj), {}, {\n            quantity: obj.quantity - 1\n          });\n        } else {\n          return obj;\n        }\n      });\n      this.setState({\n        basketItems: updatedBasket\n      });\n    }\n  }\n\n  saveBasket() {\n    const {\n      basket,\n      basketItems,\n      selectedBasket,\n      editMode\n    } = this.state;\n    const basketToUpdate = basket.find(item => item.BasketID === selectedBasket);\n\n    const updatedBasket = _objectSpread(_objectSpread({}, basketToUpdate), {}, {\n      stocks: basketItems\n    });\n\n    const updatedAllBaskets = basket.map(item => {\n      if (item.BasketID === selectedBasket) {\n        return updatedBasket;\n      } else {\n        return item;\n      }\n    });\n    this.setState({\n      basket: updatedAllBaskets,\n      editMode: false\n    });\n  }\n\n  createBasket(e) {\n    if (e.key !== 'Enter') {\n      return;\n    }\n\n    console.log(e.target.value);\n    const {\n      basket\n    } = this.state;\n    console.log(basket);\n    const id = uuidv4();\n    console.log(id);\n    const newBasket = {\n      BasketID: id,\n      name: e.target.value,\n      stock: []\n    };\n    const newBasketList = [...basket, newBasket];\n    console.log(newBasketList);\n    this.setState({\n      basket: newBasketList\n    }); // e.preventDefault();\n    // e.target.reset();\n    // TODO: create new basket\n  } // PUT API\n  // const url =\n  // \t'https://smucf-dev-ebs-g1t3-srv.cfapps.us10.hana.ondemand.com/api/Basket/' +\n  // \tselectedBasket;\n  // fetch(url, {\n  // \theaders: { 'Content-Type': 'application/json' },\n  // \tmethod: 'PUT',\n  // \tbody: JSON.stringify({\n  // \t\tBasketID: selectedBasket,\n  // \t\tname: basketToUpdate.name,\n  // \t\tstocks: basketToUpdate.stocks,\n  // \t}),\n  // });\n\n\n  onInputBasketChange(e) {\n    const {\n      onInputBasketChange\n    } = this.state;\n    this.setState({\n      onInputBasketChange: e.target.value\n    });\n  }\n\n  render() {\n    const {\n      basket,\n      allStocks,\n      basketItems,\n      editMode,\n      inputNewBasket\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"container mx-auto px-4 sm:px-8 mt-18 flex-grow h-full\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 4\n      }\n    }, __jsx(\"div\", {\n      className: \"py-8 flex-grow flex-col flex bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4 mt-4 h-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 5\n      }\n    }, __jsx(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"flex-start\",\n      alignItems: \"flex-start\",\n      spacing: 4,\n      className: \"flex flex-row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 6\n      }\n    }, __jsx(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }\n    }, __jsx(MainCard, {\n      onClick: this.expandBasket,\n      clickReset: this.resetShowBasket,\n      data: basket,\n      createBasket: this.createBasket,\n      onInputChange: this.onInputBasketChange,\n      text: inputNewBasket,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 8\n      }\n    }, \"Presets\")), __jsx(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 7\n      }\n    }, __jsx(BasketCard, {\n      onClickEdit: this.showAllStocks,\n      onClickRemove: this.handleDecrement,\n      onClickSave: this.saveBasket,\n      data: basketItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 8\n      }\n    }, \"Food Items\")), __jsx(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 7\n      }\n    }, __jsx(StockCard, {\n      increment: this.handleIncrement,\n      checker: editMode,\n      data: allStocks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 8\n      }\n    }, \"All Stocks\")))));\n  }\n\n}\n\nexport default Basket;","map":{"version":3,"sources":["/Users/seanjin/Documents/EBS/project/G1T3-frontend/client/components/foodbasket/Basket.js"],"names":["Grid","Container","React","Component","MainCard","BasketCard","StockCard","v4","uuidv4","Basket","constructor","props","state","basket","data","allStocks","basketItems","selectedBasket","editMode","inputNewBasket","expandBasket","bind","resetShowBasket","showAllStocks","handleIncrement","handleDecrement","saveBasket","createBasket","onInputBasketChange","setState","item","stocks","BasketID","id","stock_stockID","itemExist","filter","obj","stock_stock_stockID","length","updatedBasket","map","quantity","updatedItem","basket_BasketID","stock_charities_charityID","stock_stock_name","stock_name","itemToUpdate","basketToUpdate","find","updatedAllBaskets","e","key","console","log","target","value","newBasket","name","stock","newBasketList","render"],"mappings":"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","sourcesContent":["import { Grid, Container } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport MainCard from './Cards/MainCard.js';\nimport BasketCard from './Cards/BasketCard.js';\nimport StockCard from './Cards/StockCard.js';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass Basket extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tbasket: props.data.basket,\n\t\t\tallStocks: props.data.allStocks,\n\t\t\tbasketItems: null,\n\t\t\tselectedBasket: null,\n\t\t\teditMode: false,\n\t\t\tinputNewBasket: '',\n\t\t};\n\n\t\tthis.expandBasket = this.expandBasket.bind(this);\n\t\tthis.resetShowBasket = this.resetShowBasket.bind(this);\n\t\tthis.showAllStocks = this.showAllStocks.bind(this);\n\t\tthis.handleIncrement = this.handleIncrement.bind(this);\n\t\tthis.handleDecrement = this.handleDecrement.bind(this);\n\t\tthis.saveBasket = this.saveBasket.bind(this);\n\t\tthis.createBasket = this.createBasket.bind(this);\n\t\tthis.onInputBasketChange = this.onInputBasketChange.bind(this);\n\t}\n\n\tresetShowBasket() {\n\t\tthis.setState({\n\t\t\tselectedBasket: null,\n\t\t\tbasketItems: null,\n\t\t\teditMode: false,\n\t\t});\n\t}\n\texpandBasket(item) {\n\t\tthis.setState({\n\t\t\tbasketItems: item.stocks,\n\t\t\tselectedBasket: item.BasketID,\n\t\t});\n\t}\n\n\tshowAllStocks() {\n\t\tthis.setState({ editMode: true });\n\t}\n\n\thandleIncrement(item) {\n\t\tconst { basketItems, selectedBasket } = this.state;\n\n\t\tif (basketItems === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = item.stock_stockID;\n\t\tconst itemExist = basketItems.filter(\n\t\t\t(obj) => obj.stock_stock_stockID === id\n\t\t);\n\t\tif (itemExist && itemExist.length) {\n\t\t\tconst updatedBasket = basketItems.map((obj) => {\n\t\t\t\tif (obj.stock_stock_stockID === id) {\n\t\t\t\t\treturn { ...obj, quantity: obj.quantity + 1 };\n\t\t\t\t} else {\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst updatedItem = {\n\t\t\t\tquantity: 1,\n\t\t\t\tbasket_BasketID: selectedBasket,\n\t\t\t\tstock_charities_charityID: 'charity001',\n\t\t\t\tstock_stock_stockID: id,\n\t\t\t\tstock_stock_name: item.stock_name,\n\t\t\t};\n\t\t\tconst updatedBasket = [...basketItems, updatedItem];\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t\treturn;\n\t\t}\n\t}\n\n\thandleDecrement(item) {\n\t\tconst { basketItems, selectedBasket, editMode } = this.state;\n\t\tif (!editMode) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = item.stock_stock_stockID;\n\t\tconst itemToUpdate = basketItems.filter(\n\t\t\t(obj) => obj.stock_stock_stockID === id\n\t\t)[0];\n\n\t\tif (itemToUpdate.quantity === 1) {\n\t\t\tconst updatedBasket = basketItems.filter(\n\t\t\t\t(obj) => obj.stock_stock_stockID !== id\n\t\t\t);\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst updatedBasket = basketItems.map((obj) => {\n\t\t\t\tif (obj.stock_stock_stockID === id) {\n\t\t\t\t\treturn { ...obj, quantity: obj.quantity - 1 };\n\t\t\t\t} else {\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t}\n\t}\n\n\tsaveBasket() {\n\t\tconst { basket, basketItems, selectedBasket, editMode } = this.state;\n\t\tconst basketToUpdate = basket.find(\n\t\t\t(item) => item.BasketID === selectedBasket\n\t\t);\n\t\tconst updatedBasket = { ...basketToUpdate, stocks: basketItems };\n\t\tconst updatedAllBaskets = basket.map((item) => {\n\t\t\tif (item.BasketID === selectedBasket) {\n\t\t\t\treturn updatedBasket;\n\t\t\t} else {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t});\n\t\tthis.setState({ basket: updatedAllBaskets, editMode: false });\n\t}\n\tcreateBasket(e) {\n\t\tif (e.key !== 'Enter') {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(e.target.value);\n\t\tconst { basket } = this.state;\n\t\tconsole.log(basket);\n\t\tconst id = uuidv4();\n\t\tconsole.log(id);\n\t\tconst newBasket = { BasketID: id, name: e.target.value, stock: [] };\n\t\tconst newBasketList = [...basket, newBasket];\n\t\tconsole.log(newBasketList);\n\t\tthis.setState({ basket: newBasketList });\n\t\t// e.preventDefault();\n\t\t// e.target.reset();\n\t\t// TODO: create new basket\n\t}\n\t// PUT API\n\t// const url =\n\t// \t'https://smucf-dev-ebs-g1t3-srv.cfapps.us10.hana.ondemand.com/api/Basket/' +\n\t// \tselectedBasket;\n\t// fetch(url, {\n\t// \theaders: { 'Content-Type': 'application/json' },\n\t// \tmethod: 'PUT',\n\t// \tbody: JSON.stringify({\n\t// \t\tBasketID: selectedBasket,\n\t// \t\tname: basketToUpdate.name,\n\t// \t\tstocks: basketToUpdate.stocks,\n\t// \t}),\n\t// });\n\n\tonInputBasketChange(e) {\n\t\tconst { onInputBasketChange } = this.state;\n\t\tthis.setState({ onInputBasketChange: e.target.value });\n\t}\n\trender() {\n\t\tconst {\n\t\t\tbasket,\n\t\t\tallStocks,\n\t\t\tbasketItems,\n\t\t\teditMode,\n\t\t\tinputNewBasket,\n\t\t} = this.state;\n\t\treturn (\n\t\t\t<div className='container mx-auto px-4 sm:px-8 mt-18 flex-grow h-full'>\n\t\t\t\t<div className='py-8 flex-grow flex-col flex bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4 mt-4 h-auto'>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection='row'\n\t\t\t\t\t\tjustify='flex-start'\n\t\t\t\t\t\talignItems='flex-start'\n\t\t\t\t\t\tspacing={4}\n\t\t\t\t\t\tclassName='flex flex-row'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<MainCard\n\t\t\t\t\t\t\t\tonClick={this.expandBasket}\n\t\t\t\t\t\t\t\tclickReset={this.resetShowBasket}\n\t\t\t\t\t\t\t\tdata={basket}\n\t\t\t\t\t\t\t\tcreateBasket={this.createBasket}\n\t\t\t\t\t\t\t\tonInputChange={this.onInputBasketChange}\n\t\t\t\t\t\t\t\ttext={inputNewBasket}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tPresets\n\t\t\t\t\t\t\t</MainCard>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<BasketCard\n\t\t\t\t\t\t\t\tonClickEdit={this.showAllStocks}\n\t\t\t\t\t\t\t\tonClickRemove={this.handleDecrement}\n\t\t\t\t\t\t\t\tonClickSave={this.saveBasket}\n\t\t\t\t\t\t\t\tdata={basketItems}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFood Items\n\t\t\t\t\t\t\t</BasketCard>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<StockCard\n\t\t\t\t\t\t\t\tincrement={this.handleIncrement}\n\t\t\t\t\t\t\t\tchecker={editMode}\n\t\t\t\t\t\t\t\tdata={allStocks}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAll Stocks\n\t\t\t\t\t\t\t</StockCard>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Basket;\n"]},"metadata":{},"sourceType":"module"}