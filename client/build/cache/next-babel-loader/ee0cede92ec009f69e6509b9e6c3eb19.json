{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/seanjin/Documents/EBS/project/G1T3-frontend/client/components/foodbasket/Basket.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Grid, Container } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport MainCard from './Cards/MainCard.js';\nimport BasketCard from './Cards/BasketCard.js';\nimport StockCard from './Cards/StockCard.js';\nimport { v4 as uuidv4 } from 'uuid';\n\nvar Basket = /*#__PURE__*/function (_Component) {\n  _inherits(Basket, _Component);\n\n  var _super = _createSuper(Basket);\n\n  function Basket(props) {\n    var _this;\n\n    _classCallCheck(this, Basket);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      basket: props.data.basket,\n      allStocks: props.data.allStocks,\n      basketItems: null,\n      selectedBasket: null,\n      editMode: false,\n      inputNewBasket: ''\n    };\n    _this.expandBasket = _this.expandBasket.bind(_assertThisInitialized(_this));\n    _this.resetShowBasket = _this.resetShowBasket.bind(_assertThisInitialized(_this));\n    _this.showAllStocks = _this.showAllStocks.bind(_assertThisInitialized(_this));\n    _this.handleIncrement = _this.handleIncrement.bind(_assertThisInitialized(_this));\n    _this.handleDecrement = _this.handleDecrement.bind(_assertThisInitialized(_this));\n    _this.saveBasket = _this.saveBasket.bind(_assertThisInitialized(_this));\n    _this.createBasket = _this.createBasket.bind(_assertThisInitialized(_this));\n    _this.onInputBasketChange = _this.onInputBasketChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Basket, [{\n    key: \"resetShowBasket\",\n    value: function resetShowBasket() {\n      this.setState({\n        selectedBasket: null,\n        basketItems: null,\n        editMode: false\n      });\n    }\n  }, {\n    key: \"expandBasket\",\n    value: function expandBasket(item) {\n      this.setState({\n        basketItems: item.stocks,\n        selectedBasket: item.BasketID\n      });\n    }\n  }, {\n    key: \"showAllStocks\",\n    value: function showAllStocks() {\n      this.setState({\n        editMode: true\n      });\n    }\n  }, {\n    key: \"handleIncrement\",\n    value: function handleIncrement(item) {\n      var _this$state = this.state,\n          basketItems = _this$state.basketItems,\n          selectedBasket = _this$state.selectedBasket;\n\n      if (basketItems === null) {\n        return;\n      }\n\n      var id = item.stock_stockID;\n      var itemExist = basketItems.filter(function (obj) {\n        return obj.stock_stock_stockID === id;\n      });\n\n      if (itemExist && itemExist.length) {\n        var updatedBasket = basketItems.map(function (obj) {\n          if (obj.stock_stock_stockID === id) {\n            return _objectSpread(_objectSpread({}, obj), {}, {\n              quantity: obj.quantity + 1\n            });\n          } else {\n            return obj;\n          }\n        });\n        this.setState({\n          basketItems: updatedBasket\n        });\n        return;\n      } else {\n        var updatedItem = {\n          quantity: 1,\n          basket_BasketID: selectedBasket,\n          stock_charities_charityID: 'charity001',\n          stock_stock_stockID: id,\n          stock_stock_name: item.stock_name\n        };\n\n        var _updatedBasket = [].concat(_toConsumableArray(basketItems), [updatedItem]);\n\n        this.setState({\n          basketItems: _updatedBasket\n        });\n        return;\n      }\n    }\n  }, {\n    key: \"handleDecrement\",\n    value: function handleDecrement(item) {\n      var _this$state2 = this.state,\n          basketItems = _this$state2.basketItems,\n          selectedBasket = _this$state2.selectedBasket,\n          editMode = _this$state2.editMode;\n\n      if (!editMode) {\n        return;\n      }\n\n      var id = item.stock_stock_stockID;\n      var itemToUpdate = basketItems.filter(function (obj) {\n        return obj.stock_stock_stockID === id;\n      })[0];\n\n      if (itemToUpdate.quantity === 1) {\n        var updatedBasket = basketItems.filter(function (obj) {\n          return obj.stock_stock_stockID !== id;\n        });\n        this.setState({\n          basketItems: updatedBasket\n        });\n        return;\n      } else {\n        var _updatedBasket2 = basketItems.map(function (obj) {\n          if (obj.stock_stock_stockID === id) {\n            return _objectSpread(_objectSpread({}, obj), {}, {\n              quantity: obj.quantity - 1\n            });\n          } else {\n            return obj;\n          }\n        });\n\n        this.setState({\n          basketItems: _updatedBasket2\n        });\n      }\n    }\n  }, {\n    key: \"saveBasket\",\n    value: function saveBasket() {\n      var _this$state3 = this.state,\n          basket = _this$state3.basket,\n          basketItems = _this$state3.basketItems,\n          selectedBasket = _this$state3.selectedBasket,\n          editMode = _this$state3.editMode;\n      var basketToUpdate = basket.find(function (item) {\n        return item.BasketID === selectedBasket;\n      });\n\n      var updatedBasket = _objectSpread(_objectSpread({}, basketToUpdate), {}, {\n        stocks: basketItems\n      });\n\n      var updatedAllBaskets = basket.map(function (item) {\n        if (item.BasketID === selectedBasket) {\n          return updatedBasket;\n        } else {\n          return item;\n        }\n      });\n      this.setState({\n        basket: updatedAllBaskets,\n        editMode: false\n      });\n    }\n  }, {\n    key: \"createBasket\",\n    value: function createBasket(e) {\n      if (e.key !== 'Enter') {\n        return;\n      }\n\n      console.log(e.target.value);\n      var basket = this.state.basket;\n      console.log(basket);\n      var id = uuidv4();\n      console.log(id);\n      var newBasket = {\n        BasketID: id,\n        name: e.target.value,\n        stock: []\n      };\n      var newBasketList = [].concat(_toConsumableArray(basket), [newBasket]);\n      console.log(newBasketList);\n      this.setState({\n        basket: newBasketList\n      }); // e.preventDefault();\n      // e.target.reset();\n      // TODO: create new basket\n    } // PUT API\n    // const url =\n    // \t'https://smucf-dev-ebs-g1t3-srv.cfapps.us10.hana.ondemand.com/api/Basket/' +\n    // \tselectedBasket;\n    // fetch(url, {\n    // \theaders: { 'Content-Type': 'application/json' },\n    // \tmethod: 'PUT',\n    // \tbody: JSON.stringify({\n    // \t\tBasketID: selectedBasket,\n    // \t\tname: basketToUpdate.name,\n    // \t\tstocks: basketToUpdate.stocks,\n    // \t}),\n    // });\n\n  }, {\n    key: \"onInputBasketChange\",\n    value: function onInputBasketChange(e) {\n      var onInputBasketChange = this.state.onInputBasketChange;\n      this.setState({\n        onInputBasketChange: e.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state4 = this.state,\n          basket = _this$state4.basket,\n          allStocks = _this$state4.allStocks,\n          basketItems = _this$state4.basketItems,\n          editMode = _this$state4.editMode;\n      return __jsx(\"div\", {\n        className: \"container mx-auto px-4 sm:px-8 mt-18 flex-grow h-full\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 4\n        }\n      }, __jsx(\"div\", {\n        className: \"py-8 flex-grow flex-col flex bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4 mt-4 h-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 5\n        }\n      }, __jsx(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"flex-start\",\n        alignItems: \"flex-start\",\n        spacing: 4,\n        className: \"flex flex-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 6\n        }\n      }, __jsx(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 7\n        }\n      }, __jsx(MainCard, {\n        onClick: this.expandBasket,\n        clickReset: this.resetShowBasket,\n        data: basket,\n        createBasket: this.createBasket,\n        onInputChange: this.onInputBasketChange,\n        text: this.inputNewBasket,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 8\n        }\n      }, \"Presets\")), __jsx(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 7\n        }\n      }, __jsx(BasketCard, {\n        onClickEdit: this.showAllStocks,\n        onClickRemove: this.handleDecrement,\n        onClickSave: this.saveBasket,\n        data: basketItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 8\n        }\n      }, \"Food Items\")), __jsx(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 7\n        }\n      }, __jsx(StockCard, {\n        increment: this.handleIncrement,\n        checker: editMode,\n        data: allStocks,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 8\n        }\n      }, \"All Stocks\")))));\n    }\n  }]);\n\n  return Basket;\n}(Component);\n\nexport default Basket;","map":{"version":3,"sources":["/Users/seanjin/Documents/EBS/project/G1T3-frontend/client/components/foodbasket/Basket.js"],"names":["Grid","Container","React","Component","MainCard","BasketCard","StockCard","v4","uuidv4","Basket","props","state","basket","data","allStocks","basketItems","selectedBasket","editMode","inputNewBasket","expandBasket","bind","resetShowBasket","showAllStocks","handleIncrement","handleDecrement","saveBasket","createBasket","onInputBasketChange","setState","item","stocks","BasketID","id","stock_stockID","itemExist","filter","obj","stock_stock_stockID","length","updatedBasket","map","quantity","updatedItem","basket_BasketID","stock_charities_charityID","stock_stock_name","stock_name","itemToUpdate","basketToUpdate","find","updatedAllBaskets","e","key","console","log","target","value","newBasket","name","stock","newBasketList"],"mappings":"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","sourcesContent":["import { Grid, Container } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport MainCard from './Cards/MainCard.js';\nimport BasketCard from './Cards/BasketCard.js';\nimport StockCard from './Cards/StockCard.js';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass Basket extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tbasket: props.data.basket,\n\t\t\tallStocks: props.data.allStocks,\n\t\t\tbasketItems: null,\n\t\t\tselectedBasket: null,\n\t\t\teditMode: false,\n\t\t\tinputNewBasket: '',\n\t\t};\n\n\t\tthis.expandBasket = this.expandBasket.bind(this);\n\t\tthis.resetShowBasket = this.resetShowBasket.bind(this);\n\t\tthis.showAllStocks = this.showAllStocks.bind(this);\n\t\tthis.handleIncrement = this.handleIncrement.bind(this);\n\t\tthis.handleDecrement = this.handleDecrement.bind(this);\n\t\tthis.saveBasket = this.saveBasket.bind(this);\n\t\tthis.createBasket = this.createBasket.bind(this);\n\t\tthis.onInputBasketChange = this.onInputBasketChange.bind(this);\n\t}\n\n\tresetShowBasket() {\n\t\tthis.setState({\n\t\t\tselectedBasket: null,\n\t\t\tbasketItems: null,\n\t\t\teditMode: false,\n\t\t});\n\t}\n\texpandBasket(item) {\n\t\tthis.setState({\n\t\t\tbasketItems: item.stocks,\n\t\t\tselectedBasket: item.BasketID,\n\t\t});\n\t}\n\n\tshowAllStocks() {\n\t\tthis.setState({ editMode: true });\n\t}\n\n\thandleIncrement(item) {\n\t\tconst { basketItems, selectedBasket } = this.state;\n\n\t\tif (basketItems === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = item.stock_stockID;\n\t\tconst itemExist = basketItems.filter(\n\t\t\t(obj) => obj.stock_stock_stockID === id\n\t\t);\n\t\tif (itemExist && itemExist.length) {\n\t\t\tconst updatedBasket = basketItems.map((obj) => {\n\t\t\t\tif (obj.stock_stock_stockID === id) {\n\t\t\t\t\treturn { ...obj, quantity: obj.quantity + 1 };\n\t\t\t\t} else {\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst updatedItem = {\n\t\t\t\tquantity: 1,\n\t\t\t\tbasket_BasketID: selectedBasket,\n\t\t\t\tstock_charities_charityID: 'charity001',\n\t\t\t\tstock_stock_stockID: id,\n\t\t\t\tstock_stock_name: item.stock_name,\n\t\t\t};\n\t\t\tconst updatedBasket = [...basketItems, updatedItem];\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t\treturn;\n\t\t}\n\t}\n\n\thandleDecrement(item) {\n\t\tconst { basketItems, selectedBasket, editMode } = this.state;\n\t\tif (!editMode) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = item.stock_stock_stockID;\n\t\tconst itemToUpdate = basketItems.filter(\n\t\t\t(obj) => obj.stock_stock_stockID === id\n\t\t)[0];\n\n\t\tif (itemToUpdate.quantity === 1) {\n\t\t\tconst updatedBasket = basketItems.filter(\n\t\t\t\t(obj) => obj.stock_stock_stockID !== id\n\t\t\t);\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst updatedBasket = basketItems.map((obj) => {\n\t\t\t\tif (obj.stock_stock_stockID === id) {\n\t\t\t\t\treturn { ...obj, quantity: obj.quantity - 1 };\n\t\t\t\t} else {\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setState({ basketItems: updatedBasket });\n\t\t}\n\t}\n\n\tsaveBasket() {\n\t\tconst { basket, basketItems, selectedBasket, editMode } = this.state;\n\t\tconst basketToUpdate = basket.find(\n\t\t\t(item) => item.BasketID === selectedBasket\n\t\t);\n\t\tconst updatedBasket = { ...basketToUpdate, stocks: basketItems };\n\t\tconst updatedAllBaskets = basket.map((item) => {\n\t\t\tif (item.BasketID === selectedBasket) {\n\t\t\t\treturn updatedBasket;\n\t\t\t} else {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t});\n\t\tthis.setState({ basket: updatedAllBaskets, editMode: false });\n\t}\n\tcreateBasket(e) {\n\t\tif (e.key !== 'Enter') {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(e.target.value);\n\t\tconst { basket } = this.state;\n\t\tconsole.log(basket);\n\t\tconst id = uuidv4();\n\t\tconsole.log(id);\n\t\tconst newBasket = { BasketID: id, name: e.target.value, stock: [] };\n\t\tconst newBasketList = [...basket, newBasket];\n\t\tconsole.log(newBasketList);\n\t\tthis.setState({ basket: newBasketList });\n\t\t// e.preventDefault();\n\t\t// e.target.reset();\n\t\t// TODO: create new basket\n\t}\n\t// PUT API\n\t// const url =\n\t// \t'https://smucf-dev-ebs-g1t3-srv.cfapps.us10.hana.ondemand.com/api/Basket/' +\n\t// \tselectedBasket;\n\t// fetch(url, {\n\t// \theaders: { 'Content-Type': 'application/json' },\n\t// \tmethod: 'PUT',\n\t// \tbody: JSON.stringify({\n\t// \t\tBasketID: selectedBasket,\n\t// \t\tname: basketToUpdate.name,\n\t// \t\tstocks: basketToUpdate.stocks,\n\t// \t}),\n\t// });\n\n\tonInputBasketChange(e) {\n\t\tconst { onInputBasketChange } = this.state;\n\t\tthis.setState({ onInputBasketChange: e.target.value });\n\t}\n\trender() {\n\t\tconst { basket, allStocks, basketItems, editMode } = this.state;\n\t\treturn (\n\t\t\t<div className='container mx-auto px-4 sm:px-8 mt-18 flex-grow h-full'>\n\t\t\t\t<div className='py-8 flex-grow flex-col flex bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4 mt-4 h-auto'>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection='row'\n\t\t\t\t\t\tjustify='flex-start'\n\t\t\t\t\t\talignItems='flex-start'\n\t\t\t\t\t\tspacing={4}\n\t\t\t\t\t\tclassName='flex flex-row'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<MainCard\n\t\t\t\t\t\t\t\tonClick={this.expandBasket}\n\t\t\t\t\t\t\t\tclickReset={this.resetShowBasket}\n\t\t\t\t\t\t\t\tdata={basket}\n\t\t\t\t\t\t\t\tcreateBasket={this.createBasket}\n\t\t\t\t\t\t\t\tonInputChange={this.onInputBasketChange}\n\t\t\t\t\t\t\t\ttext={this.inputNewBasket}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tPresets\n\t\t\t\t\t\t\t</MainCard>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<BasketCard\n\t\t\t\t\t\t\t\tonClickEdit={this.showAllStocks}\n\t\t\t\t\t\t\t\tonClickRemove={this.handleDecrement}\n\t\t\t\t\t\t\t\tonClickSave={this.saveBasket}\n\t\t\t\t\t\t\t\tdata={basketItems}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFood Items\n\t\t\t\t\t\t\t</BasketCard>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<StockCard\n\t\t\t\t\t\t\t\tincrement={this.handleIncrement}\n\t\t\t\t\t\t\t\tchecker={editMode}\n\t\t\t\t\t\t\t\tdata={allStocks}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAll Stocks\n\t\t\t\t\t\t\t</StockCard>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Basket;\n"]},"metadata":{},"sourceType":"module"}