{"ast":null,"code":"var _jsxFileName = \"/Users/seanjin/Documents/EBS/project/G1T3-frontend/client/components/front/LoginForm.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Router from 'next/router';\nimport Alert from \"./alerts/Alert\";\nimport { useAuth } from '../../providers/Auth';\nimport { useState } from 'react';\nexport default function LoginForm({\n  setLoading,\n  stopLoading\n}) {\n  const {\n    0: email,\n    1: setEmail\n  } = useState(null);\n  const {\n    0: password,\n    1: setPassword\n  } = useState(null);\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const {\n    0: status,\n    1: setStatus\n  } = useState(null); //const url = 'https://g1t3-node-auth-srv.cfapps.us10.hana.ondemand.com/api/login';\n  //const url = 'http://localhost:5000/api/login';\n\n  const url = '/api/login';\n  const auth = useAuth();\n\n  const closeAlert = e => {\n    setError(false);\n  };\n\n  const handleChange = e => {\n    let id = e.target.getAttribute('id');\n\n    if (id == 'email') {\n      setEmail(e.target.value);\n    } else if (id == 'login-password') {\n      setPassword(e.target.value);\n    }\n\n    ;\n  };\n\n  const handleSubmit = async e => {\n    setLoading();\n    e.preventDefault();\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      body: JSON.stringify({\n        \"email\": email,\n        \"password\": password\n      })\n    };\n\n    try {\n      const response = await fetch(url, requestOptions);\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"logged in!\");\n        auth.setName(data.email);\n        auth.setRole(data.role);\n        auth.setAuth(true);\n        Router.push('/home');\n      } else {\n        // invalid params\n        setError(true);\n        setStatus('Wrong email or password!');\n      }\n    } catch (error) {\n      setError(true);\n      setStatus('Auth server might be down!');\n    }\n\n    stopLoading();\n  };\n\n  const wrapperFunction = async e => {\n    handleSubmit(e);\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, error ? __jsx(Alert, {\n    status: status,\n    close: closeAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 23\n    }\n  }) : null, __jsx(\"form\", {\n    onSubmit: wrapperFunction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, \"Email\"), __jsx(\"input\", {\n    required: true,\n    onChange: handleChange,\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    className: \"mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, \"Password\"), __jsx(\"input\", {\n    required: true,\n    onChange: handleChange,\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"login-password\",\n    type: \"password\",\n    placeholder: \"******************\",\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }), __jsx(\"p\", {\n    className: \"text-red-500 text-xs italic hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, \"Please choose a password.\")), __jsx(\"div\", {\n    className: \"mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, __jsx(\"input\", {\n    className: \"cursor-pointer w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n    type: \"submit\",\n    id: \"login\",\n    name: \"login\",\n    value: \"Login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }), __jsx(\"p\", {\n    className: \"lg:flex lg:justify-center font-bold text-sm text-blue-500 hover:text-blue-800 mt-5\",\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"Forgot Password?\"))));\n}","map":{"version":3,"sources":["/Users/seanjin/Documents/EBS/project/G1T3-frontend/client/components/front/LoginForm.js"],"names":["Router","Alert","useAuth","useState","LoginForm","setLoading","stopLoading","email","setEmail","password","setPassword","error","setError","status","setStatus","url","auth","closeAlert","e","handleChange","id","target","getAttribute","value","handleSubmit","preventDefault","requestOptions","method","headers","credentials","body","JSON","stringify","response","fetch","ok","data","json","console","log","setName","setRole","role","setAuth","push","wrapperFunction"],"mappings":"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","sourcesContent":["import Router from 'next/router'\nimport Alert from \"./alerts/Alert\";\nimport { useAuth } from '../../providers/Auth';\nimport { useState } from 'react';\n\nexport default function LoginForm({setLoading, stopLoading}) {\n    const [email, setEmail] = useState(null);\n    const [password, setPassword] = useState(null);\n    const [error, setError] = useState(false);\n    const [status, setStatus] = useState(null);\n    \n    //const url = 'https://g1t3-node-auth-srv.cfapps.us10.hana.ondemand.com/api/login';\n    //const url = 'http://localhost:5000/api/login';\n    const url = '/api/login';\n    const auth = useAuth();\n\n    const closeAlert = (e) => {\n        setError(false);\n    }\n\n    const handleChange = (e) => {\n        let id = e.target.getAttribute('id'); \n\n        if (id == 'email') {\n            setEmail(e.target.value);\n        } \n        else if (id == 'login-password') {\n            setPassword(e.target.value);\n        };\n    }\n\n    const handleSubmit = async (e) => {\n        setLoading();\n        e.preventDefault();\n\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            credentials: 'include',\n            body: JSON.stringify({\n                \"email\": email,\n                \"password\": password\n            })\n        };\n\n        try {\n            const response = await fetch(url, requestOptions);\n            if (response.ok) {\n                const data = await response.json();\n                console.log(\"logged in!\");\n                auth.setName(data.email);\n                auth.setRole(data.role);\n                auth.setAuth(true);\n                Router.push('/home')\n            }\n            else {\n                // invalid params\n                setError(true);\n                setStatus('Wrong email or password!');\n            }\n        } catch (error) {\n            setError(true);\n            setStatus('Auth server might be down!');\n        }\n        stopLoading();\n    }\n\n    const wrapperFunction = async (e) => {\n        handleSubmit(e);\n    }\n\n    return (\n        <div>\n            { error ? <Alert status={status} close={closeAlert}/> : null }\n            <form onSubmit={wrapperFunction}>\n                <div className=\"mb-4\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\">\n                        Email\n                    </label>\n                    <input required onChange={handleChange} className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" id=\"email\" type=\"email\" placeholder=\"Email\" />\n                </div>\n\n                <div className=\"mb-6\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\">\n                        Password\n                    </label>\n                    <input required onChange={handleChange} className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\" id=\"login-password\" type=\"password\" placeholder=\"******************\" autoComplete=\"off\" />\n                    <p className=\"text-red-500 text-xs italic hidden\">Please choose a password.</p>\n                </div>\n                \n                <div className=\"mb-6\">\n                <input className=\"cursor-pointer w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" type=\"submit\" id=\"login\" name=\"login\" value=\"Login\" />\n                    <p className=\"lg:flex lg:justify-center font-bold text-sm text-blue-500 hover:text-blue-800 mt-5\" href=\"#\">Forgot Password?</p>\n                </div>\n            </form>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}