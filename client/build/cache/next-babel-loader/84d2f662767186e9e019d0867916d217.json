{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Link from 'next/link';\nimport Alert from \"./alerts/Alert\";\nimport GreenAlert from \"./alerts/GreenAlert\";\n\nvar RegisterForm = /*#__PURE__*/function (_React$Component) {\n  _inherits(RegisterForm, _React$Component);\n\n  var _super = _createSuper(RegisterForm);\n\n  function RegisterForm(props) {\n    var _this;\n\n    _classCallCheck(this, RegisterForm);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"closeAlert\", function (e) {\n      _this.setState({\n        'error': false,\n        'register': false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      var id = e.target.getAttribute('id');\n\n      if (id == 'email') {\n        _this.setState({\n          'email': e.target.value\n        });\n      } else if (id == 'name') {\n        _this.setState({\n          'name': e.target.value\n        });\n      } else if (id == 'register-password') {\n        _this.setState({\n          'password': e.target.value\n        });\n      }\n\n      ;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var requestOptions, response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.props.setLoading();\n\n                e.preventDefault();\n                requestOptions = {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    \"email\": _this.state.email,\n                    \"name\": _this.state.name,\n                    \"password\": _this.state.password\n                  }),\n                  credentials: \"include\"\n                };\n                _context.prev = 3;\n                _context.next = 6;\n                return fetch(_this.state.url, requestOptions);\n\n              case 6:\n                response = _context.sent;\n                _context.next = 9;\n                return response.json();\n\n              case 9:\n                data = _context.sent;\n\n                if (response.ok) {\n                  _this.setState({\n                    'register': true\n                  });\n\n                  console.log('prompt');\n                } else {\n                  // invalid params\n                  console.log(data.status);\n\n                  _this.setState({\n                    'error': true,\n                    'status': \"Email already exist!\"\n                  });\n                }\n\n                _context.next = 18;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](3);\n                _this.props.displayAlert;\n                console.log(_context.t0);\n\n                _this.setState({\n                  'error': true,\n                  'status': \"Register server might be down!\"\n                });\n\n              case 18:\n                _this.props.stopLoading();\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 13]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _this.state = {\n      // 'url': 'https://g1t3-node-auth-srv.cfapps.us10.hana.ondemand.com/api/register',\n      // 'url': 'http://localhost:5000/api/register',\n      'url': '/api/register',\n      'email': null,\n      'name': null,\n      'password': null,\n      'error': false,\n      'status': null,\n      'loading': false,\n      'register': false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RegisterForm, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", null, this.state.error ? __jsx(Alert, {\n        status: this.state.status,\n        close: this.closeAlert\n      }) : null, this.state.register ? __jsx(GreenAlert, {\n        status: this.state.status,\n        close: this.closeAlert\n      }) : null, __jsx(\"form\", {\n        onSubmit: this.handleSubmit\n      }, __jsx(\"div\", {\n        className: \"mb-4\"\n      }, __jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\"\n      }, \"Email\"), __jsx(\"input\", {\n        required: true,\n        onChange: this.handleChange,\n        className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n        id: \"email\",\n        type: \"email\",\n        placeholder: \"Email\"\n      })), __jsx(\"div\", {\n        className: \"mb-4\"\n      }, __jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\"\n      }, \"Name\"), __jsx(\"input\", {\n        required: true,\n        onChange: this.handleChange,\n        className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n        id: \"name\",\n        type: \"text\",\n        placeholder: \"Name\"\n      })), __jsx(\"div\", {\n        className: \"mb-6\"\n      }, __jsx(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\"\n      }, \"Password\"), __jsx(\"input\", {\n        required: true,\n        onChange: this.handleChange,\n        className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\",\n        id: \"register-password\",\n        type: \"password\",\n        placeholder: \"******************\",\n        autoComplete: \"off\"\n      }), __jsx(\"p\", {\n        className: \"text-red-500 text-xs italic hidden\"\n      }, \"Please choose a password.\")), __jsx(\"div\", {\n        className: \"mb-6\"\n      }, __jsx(\"input\", {\n        className: \"cursor-pointer w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n        type: \"submit\",\n        id: \"signup\",\n        name: \"register\",\n        value: \"Register\"\n      }), __jsx(Link, {\n        href: \"#\"\n      }, __jsx(\"a\", {\n        className: \"lg:flex lg:justify-center font-bold text-sm text-blue-500 hover:text-blue-800 mt-5\",\n        href: \"#\"\n      }, \"Forgot Password?\")))));\n    }\n  }]);\n\n  return RegisterForm;\n}(React.Component);\n\nexport default RegisterForm;","map":null,"metadata":{},"sourceType":"module"}